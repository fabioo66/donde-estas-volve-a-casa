<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
  <link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Public+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#13a4ec",
              "background-light": "#f6f7f8",
              "background-dark": "#101c22",
            },
            fontFamily: {
              display: ["Public Sans"],
            },
            borderRadius: { DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px" },
          },
        },
      };
    </script>
  <title>Reportar Mascota Perdida</title>
</head>
<body class="font-display bg-background-light text-slate-800 dark:bg-background-dark dark:text-slate-200">
<div class="flex min-h-screen w-full flex-col">
  <header class="border-b border-slate-200/80 bg-background-light/80 dark:border-slate-800/80 dark:bg-background-dark/80 sticky top-0 z-50 backdrop-blur-sm">
    <div class="container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8">
      <div class="flex items-center gap-3">
        <svg class="h-8 w-8 text-primary" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <path d="M24 45.8096C19.6865 45.8096 15.4698 44.5305 11.8832 42.134C8.29667 39.7376 5.50128 36.3314 3.85056 32.3462C2.19985 28.361 1.76794 23.9758 2.60947 19.7452C3.451 15.5145 5.52816 11.6284 8.57829 8.5783C11.6284 5.52817 15.5145 3.45101 19.7452 2.60948C23.9758 1.76795 28.361 2.19986 32.3462 3.85057C36.3314 5.50129 39.7376 8.29668 42.134 11.8833C44.5305 15.4698 45.8096 19.6865 45.8096 24L24 24L24 45.8096Z" fill="currentColor"></path>
        </svg>
        <h1 class="text-xl font-bold text-slate-900 dark:text-slate-50">¿Donde estas? Volve a casa</h1>
      </div>
      <nav class="hidden items-center gap-6 md:flex">
        <a class="text-sm font-medium text-slate-600 hover:text-primary dark:text-slate-300 dark:hover:text-primary" href="/">Inicio</a>
        <a class="text-sm font-medium text-slate-600 hover:text-primary dark:text-slate-300 dark:hover:text-primary" href="/mascotas">Buscar</a>
        <a class="font-semibold text-primary" href="/mascota/nuevo">Reportar</a>
      </nav>
      <div class="flex items-center gap-4">
        <button class="flex h-10 w-10 items-center justify-center rounded-full bg-background-light hover:bg-primary/10 dark:bg-background-dark dark:hover:bg-primary/20">
          <span class="material-symbols-outlined text-slate-600 dark:text-slate-300"> notifications </span>
        </button>
        <div class="h-10 w-10 rounded-full bg-cover bg-center bg-slate-300"></div>
      </div>
    </div>
  </header>

  <main class="flex-1">
    <div class="container mx-auto max-w-2xl px-4 py-12 sm:px-6 lg:px-8">
      <div class="space-y-8">
        <div class="space-y-2 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50">Reportar una Mascota</h2>
          <p class="text-slate-500 dark:text-slate-400">Completá el formulario para reportar una mascota perdida o encontrada.</p>
        </div>

        <div class="rounded-lg border border-slate-200 bg-background-light p-6 dark:border-slate-800 dark:bg-background-dark">
          <form #mascotaFormRef="ngForm" (ngSubmit)="onSubmit(mascotaFormRef)" class="space-y-6">
            <!-- Grid de campos principales -->
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              <!-- Nombre de la Mascota -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="nombre">
                  Nombre de la Mascota *
                </label>
                <input
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50 dark:placeholder-slate-400"
                  [class.border-red-500]="esCampoInvalido(nombre)"
                  id="nombre"
                  name="nombre"
                  [(ngModel)]="mascota.nombre"
                  #nombre="ngModel"
                  required
                  placeholder="Ingresá el nombre de la mascota"
                />
                <div *ngIf="esCampoInvalido(nombre)" class="text-red-500 text-xs">
                  {{ getMensajeError(nombre) }}
                </div>
              </div>

              <!-- Fecha de Pérdida/Encuentro -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="fecha">
                  Fecha de Pérdida/Encuentro *
                </label>
                <input
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50"
                  [class.border-red-500]="esCampoInvalido(fecha)"
                  id="fecha"
                  name="fecha"
                  [(ngModel)]="mascota.fecha"
                  #fecha="ngModel"
                  required
                  type="date"
                />
                <div *ngIf="esCampoInvalido(fecha)" class="text-red-500 text-xs">
                  {{ getMensajeError(fecha) }}
                </div>
              </div>

              <!-- Tamaño -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="tamanio">
                  Tamaño *
                </label>
                <select
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50"
                  [class.border-red-500]="esCampoInvalido(tamanio)"
                  id="tamanio"
                  name="tamanio"
                  [(ngModel)]="mascota.tamanio"
                  #tamanio="ngModel"
                  required
                >
                  <option value="">Seleccionar tamaño</option>
                  <option value="PEQUENIO">Pequeño</option>
                  <option value="MEDIANO">Mediano</option>
                  <option value="GRANDE">Grande</option>
                </select>
                <div *ngIf="esCampoInvalido(tamanio)" class="text-red-500 text-xs">
                  {{ getMensajeError(tamanio) }}
                </div>
              </div>

              <!-- Color -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="color">
                  Color *
                </label>
                <input
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50 dark:placeholder-slate-400"
                  [class.border-red-500]="esCampoInvalido(color)"
                  id="color"
                  name="color"
                  [(ngModel)]="mascota.color"
                  #color="ngModel"
                  required
                  placeholder="Ej: Negro, Blanco, Marrón, Mestizo"
                />
                <div *ngIf="esCampoInvalido(color)" class="text-red-500 text-xs">
                  {{ getMensajeError(color) }}
                </div>
              </div>

              <!-- Tipo -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="tipo">
                  Tipo de Animal *
                </label>
                <select
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50"
                  [class.border-red-500]="esCampoInvalido(tipo)"
                  id="tipo"
                  name="tipo"
                  [(ngModel)]="mascota.tipo"
                  #tipo="ngModel"
                  required
                >
                  <option value="">Seleccionar tipo</option>
                  <option value="PERRO">Perro</option>
                  <option value="GATO">Gato</option>
                  <option value="OTRO">Otro</option>
                </select>
                <div *ngIf="esCampoInvalido(tipo)" class="text-red-500 text-xs">
                  {{ getMensajeError(tipo) }}
                </div>
              </div>

              <!-- Raza -->
              <div class="space-y-2">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="raza">
                  Raza
                </label>
                <input
                  class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50 dark:placeholder-slate-400"
                  id="raza"
                  name="raza"
                  [(ngModel)]="mascota.raza"
                  placeholder="Ej: Labrador, Mestizo, etc."
                />
              </div>
            </div>

            <!-- Descripción Extra -->
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="descripcion">
                Descripción Extra
              </label>
              <textarea
                class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50 dark:placeholder-slate-400"
                id="descripcion"
                name="descripcion"
                [(ngModel)]="mascota.descripcion"
                placeholder="Ingresá detalles adicionales"
                rows="4"
              ></textarea>
            </div>

            <!-- Estado -->
            <fieldset class="space-y-2">
              <legend class="text-sm font-medium text-slate-700 dark:text-slate-300">Estado *</legend>
              <div class="flex flex-wrap gap-4 pt-2">
                <label class="flex cursor-pointer items-center gap-2 rounded-lg border border-slate-300 px-4 py-2 text-sm has-[:checked]:border-primary has-[:checked]:bg-primary/10 has-[:checked]:text-primary dark:border-slate-700 dark:has-[:checked]:border-primary dark:has-[:checked]:bg-primary/20">
                  <input
                    class="form-radio h-4 w-4 border-slate-300 text-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900"
                    name="estado"
                    type="radio"
                    [(ngModel)]="mascota.estado"
                    value="PERDIDO_PROPIO"
                  />
                  Mi mascota está perdida
                </label>
                <label class="flex cursor-pointer items-center gap-2 rounded-lg border border-slate-300 px-4 py-2 text-sm has-[:checked]:border-primary has-[:checked]:bg-primary/10 has-[:checked]:text-primary dark:border-slate-700 dark:has-[:checked]:border-primary dark:has-[:checked]:bg-primary/20">
                  <input
                    class="form-radio h-4 w-4 border-slate-300 text-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900"
                    name="estado"
                    type="radio"
                    [(ngModel)]="mascota.estado"
                    value="PERDIDO_AJENO"
                  />
                  Encontré una mascota perdida
                </label>
                <label class="flex cursor-pointer items-center gap-2 rounded-lg border border-slate-300 px-4 py-2 text-sm has-[:checked]:border-primary has-[:checked]:bg-primary/10 has-[:checked]:text-primary dark:border-slate-700 dark:has-[:checked]:border-primary dark:has-[:checked]:bg-primary/20">
                  <input
                    class="form-radio h-4 w-4 border-slate-300 text-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900"
                    name="estado"
                    type="radio"
                    [(ngModel)]="mascota.estado"
                    value="ADOPTADO"
                  />
                  Para adopción
                </label>
              </div>
            </fieldset>

            <!-- Upload de Fotos -->
            <div class="space-y-4">
              <label class="text-sm font-medium text-slate-700 dark:text-slate-300">Fotos</label>

              <!-- Drop zone -->
              <div class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-slate-300 p-8 text-center dark:border-slate-700">
                <span class="material-symbols-outlined text-5xl text-slate-400 dark:text-slate-500"> cloud_upload </span>
                <p class="mt-2 text-sm font-semibold text-slate-600 dark:text-slate-300">Arrastrá y soltá o hacé clic para subir</p>
                <p class="text-xs text-slate-500 dark:text-slate-400">PNG, JPG, GIF hasta 10MB</p>
                <label for="file-upload" class="mt-4 cursor-pointer rounded-lg bg-primary/10 px-4 py-2 text-sm font-semibold text-primary hover:bg-primary/20 dark:bg-primary/20 dark:hover:bg-primary/30">
                  Subir Archivo
                </label>
                <input
                  id="file-upload"
                  type="file"
                  class="hidden"
                  multiple
                  accept="image/*"
                  (change)="onFileSelect($event)"
                />
              </div>

              <!-- Previsualizaciones -->
              <div *ngIf="previsualizaciones.length > 0" class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                <div
                  *ngFor="let preview of previsualizaciones; let i = index"
                  class="relative group"
                >
                  <img
                    [src]="preview"
                    alt="Preview"
                    class="w-full h-32 object-cover rounded-lg"
                  />
                  <button
                    type="button"
                    (click)="eliminarArchivo(i)"
                    class="absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity"
                  >
                    <span class="material-symbols-outlined text-sm">close</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Coordenadas (opcional) -->
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700 dark:text-slate-300" for="coordenadas">
                Última Ubicación Vista (Coordenadas)
              </label>
              <input
                class="block w-full rounded-lg border-slate-300 bg-background-light p-3 text-sm text-slate-900 focus:border-primary focus:ring-primary dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-50 dark:placeholder-slate-400"
                id="coordenadas"
                name="coordenadas"
                [(ngModel)]="mascota.coordenadas"
                placeholder="Ej: -34.6118, -58.3960 (opcional)"
              />
            </div>

            <!-- Botón de envío -->
            <div class="pt-4">
              <button
                class="w-full rounded-lg bg-primary px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed"
                [disabled]="loading"
                type="submit"
              >
                <span *ngIf="loading">Enviando...</span>
                <span *ngIf="!loading">Enviar Reporte</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
</div>
</body>
</html>
